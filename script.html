<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotether</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="favicon.ico">
</head>
<body>
   <img class="logo" src="logo.png">
<div class="main">
   <p class="cu1"><a href="#contactus" target="_blank">contact us</a></p>
   <p class="cu2"><a href="#about" target="_blank">about</a></p>
   <p class="cu3"><a href="navbar/reference.html" target="_blank">reference</a></p>
</div>
<div>
	<p style="text-align:center;">Users can check in by confirming the type of room they want. Note that each room costs 1 ETH!</p>
	<input type = "text" placeholder="Address(HexaDecimal)" id = "occupant" style="background-color:white;margin-left:auto;margin-right:auto;display:block;margin-top:0%;margin-bottom:0%">
   <p id = 'Occupant'></p>
   <input type = "number" placeholder="Room Number" id = "roomNumber" style="background-color:white;margin-left:auto;margin-right:auto;display:block;margin-top:0%;margin-bottom:0%">
   <p id = 'Rooms'></p>
   <button id="checkin" style="background-color:rgb(23, 207, 239);margin-left:auto;margin-right:auto;display:block;margin-top:0%;margin-bottom:0%"> Check In </button>
   <br>
   <br>
   <br>
   <br>
</div>
<div>
	<p style="text-align:center;">Only hotel manager Can access these buttons !</p>
   <input type = "number" placeholder="Room Capacity" id = "roomCapacity" style="background-color:white;margin-left:auto;margin-right:auto;display:block;margin-top:0%;margin-bottom:-20%">
   <p id = 'Capacity'></p>
   <button id ='addRoom' style="background-color:rgb(23, 207, 239);margin-left:auto;margin-right:auto;display:block;margin-top:22%;margin-bottom:0%">Add Room</button>
   <br>
   <br>
   <br>
   <br>
   <div class="space">
</div>

<div>
   <input type = "number" placeholder="Enter 0-vac or 1-occ" id = "occupancyStatus" style="background-color:white;margin-left:auto;margin-right:auto;display:block;margin-top:0%;margin-bottom:0%">
   <p id = 'Status'></p>
	<input type = "number" placeholder="Room Number" id = "roomNumber" style="background-color:white;margin-left:auto;margin-right:auto;display:block;margin-top:0%;margin-bottom:0%">
	<p id = 'Room'></p>
   <button id="ChangeRoomOccupancyStatus" style="background-color:rgb(23, 207, 239);margin-left:auto;margin-right:auto;display:block;margin-top:0%;margin-bottom:0%">Change Room's Occupancy Status</button>
   <br>
   <br>
   <br>
   <br>
</div>



<div>
	<input type = "text" placeholder="Address of new owner" id = "newOwner" style="background-color:white;margin-left:auto;margin-right:auto;display:block;margin-top:0%;margin-bottom:0%">
	<p id = 'Owner'></p>
   <button id="transferOwnership" style="background-color:rgb(23, 207, 239);margin-left:auto;margin-right:auto;display:block;margin-top:0%;margin-bottom:0%">Transfer Ownership</button>
   <br>
   <br>
   <br>
   <br>
</div>



   <div class="main" id="contactus">
     <h2>Contact us</h2>
     <p>to add -  contact number and email id</p>
     <a href="#about">about </a>

   </div>
   
   <div class="main" id="about">
     <h2>about</h2>
     <a href="#contactus">contact us</a>
   </div>
   
   <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.5.0/web3.min.js" integrity="sha512-0/nXBDmnbXRIkGvwIK2UWg4F8xscIFZHGl2sWevr6f0DnFEqZh4uTw78qLQYC16tVxbbHhoaaZLSBoIopZQucg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
   <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
   
   <script>
      var contract;
      $(document).ready(function(){
         web3 = new Web3(web3.currentProvider);
   
         var address = "0xD2Db24A27882094872E8557a3Bb608C5C797fFB5";
         var abi = [
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "address",
				"name": "Customer",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "transfer",
		"type": "event"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "enum BookingContract.status",
				"name": "occupancyStatus",
				"type": "uint8"
			},
			{
				"internalType": "uint256",
				"name": "roomNumber",
				"type": "uint256"
			}
		],
		"name": "ChangeRoomOccupancyStatus",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "HotelName",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "Location",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "RoomStatus",
		"outputs": [
			{
				"internalType": "enum BookingContract.status",
				"name": "",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "uint256",
				"name": "roomCapacity",
				"type": "uint256"
			}
		],
		"name": "addRoom",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "address",
				"name": "occupant",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "roomNumber",
				"type": "uint256"
			}
		],
		"name": "checkin",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "cleaner",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getRoom",
		"outputs": [
			{
				"components": [
					{
						"internalType": "uint256",
						"name": "capacity",
						"type": "uint256"
					},
					{
						"internalType": "uint256",
						"name": "numOccupants",
						"type": "uint256"
					},
					{
						"internalType": "bool",
						"name": "occupied",
						"type": "bool"
					},
					{
						"internalType": "enum BookingContract.status",
						"name": "condition",
						"type": "uint8"
					},
					{
						"internalType": "address",
						"name": "occupier",
						"type": "address"
					}
				],
				"internalType": "struct BookingContract.Room[]",
				"name": "",
				"type": "tuple[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "numRooms",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "owner",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"name": "rooms",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "capacity",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "numOccupants",
				"type": "uint256"
			},
			{
				"internalType": "bool",
				"name": "occupied",
				"type": "bool"
			},
			{
				"internalType": "enum BookingContract.status",
				"name": "condition",
				"type": "uint8"
			},
			{
				"internalType": "address",
				"name": "occupier",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "address",
				"name": "newOwner",
				"type": "address"
			}
		],
		"name": "transferOwnership",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	}
];
         contract = new web3.eth.Contract(abi, address);
		 
         $('#addRoom').click(function(){
            console.log("addRoom");
           var roomCapacity = parseInt($('#roomCapacity').val());
		
         //   contract.methods.addRoom(roomCapacity).send({from: web3.eth.defaultAccount, gas: 3000000});
           web3.eth.requestAccounts().then(function(accounts){
                           var acc = accounts[0];
                           return contract.methods.addRoom(roomCapacity).send({from: acc, gas: 3000000});
                       }).then(function(tx){
                           console.log(tx);
                       }).catch(function(tx){
                           console.log(tx);
                       })
         });
		 $('#ChangeRoomOccupancyStatus').click(function(){
			console.log("ChangeRoomOccupancyStatus");
			var occupancyStatus = parseInt($('#occupancyStatus').val());
			var roomNumber = parseInt($('#roomNumber').val());

			web3.eth.requestAccounts().then(function(accounts){
                           var acc = accounts[0];
                           return contract.methods.ChangeRoomOccupancyStatus(occupancyStatus, roomNumber).send({from: acc, gas: 3000000});
						   
                       }).then(function(tx){
                           console.log(tx);
                       }).catch(function(tx){
                           console.log(tx);
                       })
         });

		 $('#transferOwnership').click(function(){
            console.log("transferOwnership");
           var roomCapacity = $('#newOwner').val();
		
           web3.eth.requestAccounts().then(function(accounts){
                           var acc = accounts[0];
                           return contract.methods.transferOwnership(newOwner).send({from: acc, gas: 3000000});
                       }).then(function(tx){
                           console.log(tx);
                       }).catch(function(tx){
                           console.log(tx);
                       })
         });

		 $('#checkin').click(function(){
			console.log("checkin");
			var occupancyStatus = parseInt($('#occupant').val());
			var roomNumber = parseInt($('#roomNumber').val());

			web3.eth.requestAccounts().then(function(accounts){
                           var acc = accounts[0];
                           return contract.methods.ChangeRoomOccupancyStatus(occupant, roomNumber).send({from: acc, gas: 3000000});
						   
                       }).then(function(tx){
                           console.log(tx);
                       }).catch(function(tx){
                           console.log(tx);
                       })
         });
		 
		 });
   </script>





</body>

</html>
